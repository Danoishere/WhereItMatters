{"version":3,"sources":["app.js","donationrequest.js","environment.js","filter.js","main.js","requestlist.js","requestlistmain.js","resources/index.js"],"names":["App","message","DonationRequest","debug","testing","Filter","list","priority","window","filterData","checkL1","checkL2","checkL3","checkL4","checkL5","checkL6","getUrlArguments","url","forEach","element","push","updatePriorities","searchRequests","configure","Promise","config","longStackTraces","warnings","wForgottenReturn","aurelia","use","standardConfiguration","feature","developmentLogging","plugin","start","then","setRoot","RequestList","httpClient","imageUrl","imagePath","priorities","filter","requestList","params","searchTerm","encodeURIComponent","additionalArguments","updateRequests","undefined","join","fetch","response","json","data","request","sumOfDonations","donations","donation","amountUSD","stillNeeded","neededAmountUSD","toFixed","searchTermChanged","newVal","oldVal","strip","number","parseFloat","toPrecision","withBaseUrl","withDefaults","credentials","headers","container","registerInstance"],"mappings":"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","file":"app-bundle.js","sourcesContent":["export class App {\n  constructor() {\n    this.message = 'Hello World!';\n  }\n}\n","export class DonationRequest {\r\n    constructor() {\r\n\r\n    }\r\n}","export default {\n  debug: true,\n  testing: true\n};\n","import { inject, bindable } from 'aurelia-framework';\r\n\r\nexport class Filter {\r\n\r\n    @bindable priority = [];\r\n\r\n    constructor(list) {\r\n\r\n        this.list = list;\r\n\r\n        this.priority[0] = window.filterData.checkL1;\r\n        this.priority[1] = window.filterData.checkL2;\r\n        this.priority[2] = window.filterData.checkL3;\r\n        this.priority[3] = window.filterData.checkL4;\r\n        this.priority[4] = window.filterData.checkL5;\r\n        this.priority[5] = window.filterData.checkL6;\r\n    }\r\n\r\n    getUrlArguments() {\r\n        var url = [];\r\n\r\n        this.priority.forEach(function(element) {\r\n            url.push('priority=' + element);\r\n        }, this);\r\n\r\n        return url;\r\n    }\r\n\r\n    updatePriorities() {\r\n        this.list.searchRequests();\r\n    }\r\n}","import environment from './environment';\n\n//Configure Bluebird Promises.\nPromise.config({\n  longStackTraces: environment.debug,\n  warnings: {\n    wForgottenReturn: false\n  }\n});\n\nexport function configure(aurelia) {\n  aurelia.use\n    .standardConfiguration()\n    .feature('resources');\n\n  if (environment.debug) {\n    aurelia.use.developmentLogging();\n  }\n\n  if (environment.testing) {\n    aurelia.use.plugin('aurelia-testing');\n  }\n\n  aurelia.start().then(() => aurelia.setRoot());\n}\n","import { HttpClient } from 'aurelia-fetch-client';\nimport { inject, bindable } from 'aurelia-framework';\nimport { Filter } from './filter';\n\n@inject(HttpClient)\nexport class RequestList {\n\n    @bindable searchTerm = '';\n\n    constructor(httpClient) {\n\n        this.imageUrl = window.imagePath;\n        this.priorities = window.priorities;\n\n        this.message = 'Show List!';\n        this.httpClient = httpClient;\n        this.filter = new Filter(this);\n        this.requestList = [];\n\n        this.searchRequests();\n    }\n\n    searchRequests() {\n        var url = 'donationdata/requests';\n        var params = [];\n\n        if (this.searchTerm) {\n            params.push('searchTerms=' + encodeURIComponent(this.searchTerm));\n        }\n        var additionalArguments = this.filter.getUrlArguments();\n        additionalArguments.forEach(function(element) {\n            params.push(element);\n        }, this);\n\n        this.updateRequests(url, params);\n    }\n\n    updateRequests(url, params) {\n\n        if (params !== undefined) {\n            params = params.join('&');\n\n            if (params) {\n                url = url + '?' + params;\n            }\n        }\n\n        this.httpClient.fetch(url)\n            .then(response => response.json())\n            .then(data => {\n                this.requestList = data;\n                this.requestList.forEach(function(request) {\n                    var sumOfDonations = 0;\n                    request.donations.forEach(function(donation) {\n                        sumOfDonations = sumOfDonations + donation.amountUSD;\n                    }, this);\n                    request.stillNeeded = request.neededAmountUSD - sumOfDonations;\n                    request.stillNeeded = request.stillNeeded.toFixed(2);\n                }, this);\n            });\n    }\n\n    searchTermChanged(newVal, oldVal) {\n        this.searchRequests(newVal);\n    }\n\n    strip(number) {\r\n        return (parseFloat(number).toPrecision(12));\r\n    }\n}","import environment from './environment';\r\nimport { HttpClient } from 'aurelia-fetch-client';\r\n\r\n//Configure Bluebird Promises.\r\nPromise.config({\r\n    longStackTraces: environment.debug,\r\n    warnings: {\r\n        wForgottenReturn: false\r\n    }\r\n});\r\n\r\nexport function configure(aurelia) {\r\n    aurelia.use\r\n        .standardConfiguration()\r\n        .feature('resources');\r\n\r\n    if (environment.debug) {\r\n        aurelia.use.developmentLogging();\r\n    }\r\n\r\n    if (environment.testing) {\r\n        aurelia.use.plugin('aurelia-testing');\r\n    }\r\n\r\n    let httpClient = new HttpClient();\r\n\r\n    httpClient.configure(config => {\r\n        config\r\n            .withBaseUrl('api/')\r\n            .withDefaults({\r\n                credentials: 'same-origin',\r\n                headers: {\r\n                    'Accept': 'application/json',\r\n                    'X-Requested-With': 'Fetch'\r\n                }\r\n            });\r\n    });\r\n\r\n    aurelia.container.registerInstance(HttpClient, httpClient);\r\n    aurelia.start().then(() => aurelia.setRoot('requestlist'));\r\n}","export function configure(config) {\n  //config.globalResources([]);\n}\n"],"sourceRoot":"../src"}